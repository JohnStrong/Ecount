<div ng-init="getConstituencies()">
	<div class="county-contain">
		<div ng-if="constituencies !== null">
			<div class="county-inner" ng-init="getElections()">
				<div>
					<a href="" class="btn nav pull-right" ng-click="dump()">Close[x]</a>
					<div class="header">
						<h3 class="page-header text-primary">Tally View</h3>
					</div>
			    	<div class="row">
						<div class="col-md-12">
							<div ng-if="mainTally !== null">
								<div id="live-feed" class="list-group">
									<div class="list-group-item">
										<div class="feed-nav navbar-text navbar-right">
											<div ng-if="mainTally.live">
												<div class="status">live!</div>
											</div>
										</div>
										<div class="feed-main">
											<div class="feed-header">
												<h3 class="page-header">
													{{mainTally.election.title}}
													<small>{{mainTally.election.tallyDate}}</small>
												</h3>
											</div>
											<div ng-controller="DistrictVisController">
											</div>
											<div class="list-group-item" ng-controller="DistrictsMapController">
												<div id="imap" ng-init="loadMap()">
													<div id="county-map-view">
														<div style="height: 580px"></div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row" ng-controller="ElectionController">
						<div class="col-md-12" ng-if="elections.length > 0 && counties.length > 0">
							<div class="tally-results-body">
								<div role="form">
									<div class="form-group">
										<h3 class="text-primary page-header">Previous Tally Results</h3>
										<div id="election-nav-pane" class="election-nav">
											<select ng-model="election" class="form-control"
												ng-options="e.title for e in elections">
												<option value="">-- choose election --</option>
											</select>
											<select ng-model="county" class="form-control"
													ng-options="c.name for c in counties">
													<option value="">-- choose county --</option>
											</select>
										</div>
									</div>
								</div>
								<div ng-switch on="county !== null && election !== null" class="tally-container">
									<div ng-switch-when="true">
										<div ng-controller="PreviousTallyController">
											<h3 class="text-primary">{{county.name}}</h3>
											<div class="col-md-12">
									    		<!-- vis controller -->
									    		working...
									    	</div>
									    </div>
									</div>
									<div ng-switch-when="false">
										<div class="alert alert-info">
											Choose an election and county to view previous tally results...
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>